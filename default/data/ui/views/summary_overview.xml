<dashboard>
  <label>Acceleration Data Overview (6.4+)</label>

  <search id="summary_overview_rest">
    <query>
      | rest /services/data/summaries
    </query>
  </search>

  <row>
    <html>
<div id="fire_brigade_help">
This page employs a REST endpoint introduced in version 6.4 providing
summary information about the disk usage of <i>summaries</i> in the
Splunk environment. These are broken out into two types:
<em>data_model_acceleration</em> summaries, which represent the
artifacts built to "accelerate" a Data Model. The other type are
called <em>report_acceleration</em> summaries, and these represent
accelerated reports. While the underlying data store is different,
both types of artifacts take up space, and may play into retention
policy questions.
</div>
    </html>
  </row>

  <row>
    <panel>
      <table>
        <title>Datamodel Summary Usage by Model Title</title>
        <option name="link.visible">false</option>
	<search base="summary_overview_rest">
          <query>search type=data_model_acceleration
| fields name, total_bucket_count, total_size
| rename name AS "Model Title", total_bucket_count AS "Bucket Count",
total_size AS "Cumulative Usage (MB)"
	  </query>
	</search>
	<drilldown>
	  <link><![CDATA[
/app/fire_brigade/summary_dma_summary_detail?form.dm_full_name=$row.Model Title$]]>
	  </link>
	</drilldown>
      </table>     
    </panel>
    <panel>
      <table>
        <title>Report Acceleration Usage by Search Name</title>
        <option name="link.visible">false</option>
	<search base="summary_overview_rest">
          <query>search type=report_acceleration
| fields name, total_bucket_count, total_size
| rename name AS "Search Name", total_bucket_count AS "Bucket Count", total_size AS "Cumulative Usage"
	  </query>
	</search>
      </table>     
    </panel>
  </row>

  <row>
    <panel>
      <chart>
	<title>Datamodel Summary Usage by Indexer Host</title>
        <option name="link.visible">false</option>
        <search base="summary_overview_rest">
          <query>search type=data_model_acceleration
| stats sum(total_size) AS Usage by splunk_server
| rename splunk_server AS Indexer</query>
	</search>
      </chart>
      
    </panel>
    <panel>
      <chart>
	<title>Report Acceleration Summary Usage by Indexer Host</title>
        <option name="link.visible">false</option>
        <search base="summary_overview_rest">
          <query>search type=report_acceleration
| stats sum(total_size) AS Usage by splunk_server
| rename splunk_server AS Indexer</query>
	</search>
      </chart>
      
    </panel>
  </row>
  <row>
    <panel>
      <chart>
	<title>Datamodel Summary Usage by Search Head</title>
        <option name="link.visible">false</option>
        <search base="summary_overview_rest">
          <query>search type=data_model_acceleration
| stats sum(total_size) AS Usage by search_head_guid
| join type=left search_head_guid [| rest /services/server/info | rename guid AS search_head_guid ]
| eval shead=coalesce(splunk_server, search_head_guid)
| rename shead AS "Search Head"
| fields "Search Head", Usage</query>
	</search>
      </chart>
      
    </panel>
    <panel>
      <chart>
	<title>Report Acceleration Summary Usage by Search Head</title>
        <option name="link.visible">false</option>
        <search base="summary_overview_rest">
          <query>search type=report_acceleration
| stats sum(total_size) AS Usage by search_head_guid
| join type=left search_head_guid [| rest /services/server/info | rename guid AS search_head_guid ]
| eval shead=coalesce(splunk_server, search_head_guid)
| rename shead AS "Search Head"
| fields "Search Head", Usage</query>
	</search>
      </chart>
      
    </panel>
  </row>
</dashboard>
